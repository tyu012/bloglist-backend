{"version":3,"sources":["components/LoginForm.js","components/Blog.js","components/BlogList.js","components/NewBlogForm.js","components/Notification.js","services/blogs.js","services/login.js","components/Togglable.js","App.js","index.js"],"names":["LoginForm","props","handleLogin","username","setUsername","password","setPassword","onSubmit","type","value","name","onChange","target","Blog","blog","user","likeBlog","removeBlog","useState","detailed","setDetailed","handleLike","event","a","preventDefault","handleRemove","window","confirm","title","author","showWhenDetailed","display","showToPosterWhenDetailed","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","className","onClick","url","likes","ActiveUserStatus","logout","BlogList","blogs","map","id","NewBlogForm","React","forwardRef","ref","submitBlog","setTitle","setAuthor","setUrl","useImperativeHandle","displayName","Notification","contents","isShowing","text","baseUrl","token","getAll","axios","get","then","response","data","setToken","newToken","submit","config","headers","Authorization","post","like","newBlog","put","deleteBlog","delete","login","credentials","Togglable","visible","setVisible","hideWhenVisible","showWhenVisible","toggleVisibility","buttonLabel","children","App","setBlogsFinal","setUser","notification","setNotification","showingNotification","setShowingNotification","setBlogs","blogArray","sort","b1","b2","newBlogFormTogglable","useRef","newBlogForm","useEffect","currentUserJSON","localStorage","getItem","JSON","parse","blogService","console","log","showNotification","setTimeout","loginService","setItem","stringify","success","concat","likedBlogUser","likedBlog","newBlogs","b","deletedBlog","filter","current","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.729e06c4.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst LoginForm = props => {\n  const {\n    handleLogin,\n    username,\n    setUsername,\n    password,\n    setPassword,\n  } = props\n\n  return (\n    <form onSubmit={handleLogin}>\n      <div>\n        username\n        <input\n          type=\"text\"\n          value={username}\n          name=\"Username\"\n          onChange={({ target }) => setUsername(target.value)}\n        />\n      </div>\n      <div>\n        password\n        <input\n          type=\"text\"\n          value={password}\n          name=\"Password\"\n          onChange={({ target }) => setPassword(target.value)}\n        />\n      </div>\n      <button type=\"submit\">login</button>\n    </form>\n  )\n}\n\nLoginForm.propTypes = {\n  handleLogin: PropTypes.func.isRequired,\n  username: PropTypes.string.isRequired,\n  setUsername: PropTypes.func.isRequired,\n  password: PropTypes.string.isRequired,\n  setPassword: PropTypes.func.isRequired,\n}\n\nexport default LoginForm","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Blog = ({ blog, user, likeBlog, removeBlog }) => {\n  const [detailed, setDetailed] = useState(false)\n\n  const toggleDetail = event => {\n    event.preventDefault()\n    setDetailed(!detailed)\n  }\n\n  const handleLike = async event => {\n    event.preventDefault()\n    await likeBlog(blog)\n  }\n\n  const handleRemove = async event => {\n    event.preventDefault()\n    if (window.confirm(`Remove blog ${blog.title} by ${blog.author}`)) {\n      await removeBlog(blog)\n    }\n  }\n\n  const isPoster = () => user.username === blog.user.username\n\n  const showWhenDetailed = { display: detailed ? '' : 'none' }\n  const showToPosterWhenDetailed = { display: detailed && isPoster() ? '' : 'none' }\n\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5\n  }\n\n  return (\n    <div style={blogStyle}>\n      <div className=\"basicBlogInfo\">\n        {blog.title} {blog.author}\n        <button onClick={toggleDetail}>{detailed ? 'hide' : 'view'}</button>\n      </div>\n\n      <div style={showWhenDetailed} className=\"detailedBlogInfo\">\n        <div>\n          {blog.url}\n        </div>\n\n        <div>\n          likes {blog.likes}\n          <button onClick={handleLike}>like</button>\n        </div>\n\n        <div>\n          {blog.user.name}\n        </div>\n\n        <div style={showToPosterWhenDetailed}>\n          <button onClick={handleRemove}>remove</button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nBlog.propTypes = {\n  blog: PropTypes.object.isRequired,\n  likeBlog: PropTypes.func.isRequired,\n  removeBlog: PropTypes.func.isRequired,\n}\n\nexport default Blog","import React from 'react'\nimport Blog from './Blog'\n\nconst ActiveUserStatus = ({ user, logout }) => (\n  <div>\n    <p>{user.name} logged in<button onClick={logout}>logout</button></p>\n  </div>\n)\n\nconst BlogList = props => {\n  const { user, blogs, logout, likeBlog, removeBlog } = props\n\n  return (\n    <div>\n      <ActiveUserStatus\n        user={user}\n        logout={logout}\n      />\n\n      {blogs.map(blog =>\n        <Blog\n          key={blog.id}\n          blog={blog}\n          user={user}\n          likeBlog={likeBlog}\n          removeBlog={removeBlog}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default BlogList","import React, { useState, useImperativeHandle } from 'react'\n\nconst NewBlogForm = React.forwardRef((props, ref) => {\n  const {\n    submitBlog,\n  } = props\n\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n\n  const handleBlogSubmission = event => {\n    event.preventDefault()\n    submitBlog({\n      title,\n      author,\n      url,\n      likes: 0,\n    })\n  }\n\n  useImperativeHandle(ref, () => {\n    return { title, setTitle, author, setAuthor, url, setUrl }\n  })\n\n  return (\n    <form onSubmit={handleBlogSubmission}>\n      <div>\n        title:\n        <input\n          type=\"text\"\n          value={title}\n          name=\"title\"\n          onChange={({ target }) => setTitle(target.value)}\n        />\n      </div>\n      <div>\n        author:\n        <input\n          type=\"text\"\n          value={author}\n          name=\"author\"\n          onChange={({ target }) => setAuthor(target.value)}\n        />\n      </div>\n      <div>\n        url:\n        <input\n          type=\"text\"\n          value={url}\n          name=\"url\"\n          onChange={({ target }) => setUrl(target.value)}\n        />\n      </div>\n      <button type=\"submit\">create</button>\n    </form>\n  )\n})\n\nNewBlogForm.displayName = 'NewBlogForm'\n\nexport default NewBlogForm","import React from 'react'\n\nconst Notification = ({ contents, isShowing }) => {\n  const { text } = contents /* success not implemented */\n\n  if (isShowing) {\n    return (\n      <div>{text}</div>\n    )\n  } else {\n    return (<div></div>)\n  }\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst setToken = newToken => token = `bearer ${newToken}`\n\nconst submit = async blog => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, blog, config)\n  return response.data\n}\n\nconst like = async blog => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const newBlog = {\n    ...blog,\n    likes: blog.likes + 1,\n  }\n\n  const response = await axios.put(`${baseUrl}/${blog.id}`, newBlog, config)\n  return response.data\n}\n\nconst deleteBlog = async blog => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.delete(`${baseUrl}/${blog.id}`, config)\n  return response.data\n}\n\nexport default { getAll, setToken, submit, like, deleteBlog }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import React, { useState, useImperativeHandle } from 'react'\n\nconst Togglable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return { toggleVisibility }\n  })\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  )\n})\n\nTogglable.displayName = 'Togglable'\n\nexport default Togglable","import React, { useState, useEffect, useRef } from 'react'\n\nimport LoginForm from './components/LoginForm'\nimport BlogList from './components/BlogList'\nimport NewBlogForm from './components/NewBlogForm'\nimport Notification from './components/Notification'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport Togglable from './components/Togglable'\n\nconst App = () => {\n  const [blogs, setBlogsFinal] = useState([]) /* do not directly use setBlogsFinal */\n  // authentication\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  // blog submission\n  const [notification, setNotification] = useState({})\n  const [showingNotification, setShowingNotification] = useState(false)\n\n  const setBlogs = blogArray => {\n    setBlogsFinal(blogArray.sort((b1, b2) => b2.likes - b1.likes))\n  }\n\n  const newBlogFormTogglable = useRef()\n  const newBlogForm = useRef()\n\n  useEffect(() => {\n    const currentUserJSON = window.localStorage.getItem('currentBloglistUser')\n\n    if (currentUserJSON) {\n      const user = JSON.parse(currentUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n      console.log('user found:', user.username)\n    } else {\n      console.log('user not found')\n    }\n\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n  const showNotification = contents => {\n    setNotification(contents)\n    setShowingNotification(true)\n    setTimeout(() => {\n      setShowingNotification(false)\n      setNotification({})\n    }, 2500)\n  }\n\n  const handleLogin = async event => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({ username, password })\n\n      window.localStorage.setItem('currentBloglistUser', JSON.stringify(user))\n\n      setUser(user)\n      blogService.setToken(user.token)\n      setUsername('')\n      setPassword('')\n      showNotification({ success: true, text: `logged in as ${user.username}` })\n    } catch (exception) {\n      console.log('login failed')\n      showNotification({ success: false, text: 'wrong username or password' })\n    }\n  }\n\n  const logout = event => {\n    event.preventDefault()\n\n    setUser(null)\n    newBlogForm.current.setTitle('')\n    newBlogForm.current.setAuthor('')\n    newBlogForm.current.setUrl('')\n\n    window.localStorage.removeItem('currentBloglistUser')\n    showNotification({ success: true, text: 'logged out' })\n  }\n\n  const submitBlog = async newBlog => {\n    try {\n      const blog = await blogService.submit(newBlog)\n      console.log('blog submitted', blog)\n      setBlogs(blogs.concat({ ...blog, user: user })) /* Workaround to save user data */\n\n      if (blog) {\n        showNotification({ success: true, text: `${blog.title} added` })\n      } else {\n        showNotification({ success: false, text: 'blog creation failed' })\n      }\n    } catch {\n      console.log('blog submission failed')\n      showNotification({ success: false, text: 'blog creation failed' })\n    }\n  }\n\n  const likeBlog = async blog => {\n    try {\n      // Workaround to save user data\n      const likedBlogUser = blog.user\n\n      const likedBlog = await blogService.like(blog)\n      const newBlogs = blogs.map(b =>\n        b === blog\n          ? { ...likedBlog, user: likedBlogUser } /* Workaround to save user data */\n          : b\n      )\n      setBlogs(newBlogs)\n\n      if (likedBlog) {\n        showNotification({ success: true, text: `${blog.title} liked` })\n      } else {\n        showNotification({ success: false, text: 'blog cannot be liked' })\n      }\n    } catch {\n      console.log('blog cannot be liked')\n      showNotification({ success: false, text: 'blog cannot be liked' })\n    }\n  }\n\n  const removeBlog = async blog => {\n    try {\n      const deletedBlog = await blogService.deleteBlog(blog)\n      const newBlogs = blogs.filter(b => b !== blog)\n      setBlogs(newBlogs)\n\n      if (deletedBlog) {\n        showNotification({ success: true, text: `${blog.title} liked` })\n      } else {\n        showNotification({ success: false, text: 'blog cannot be liked' })\n      }\n    } catch {\n      console.log('blog cannot be liked')\n      showNotification({ success: false, text: 'blog cannot be liked' })\n    }\n  }\n\n\n  return user ?\n    (\n      <div>\n        <h2>Blogs</h2>\n        <Notification contents={notification} isShowing={showingNotification} />\n        <Togglable buttonLabel=\"create new blog\" ref={newBlogFormTogglable}>\n          <h3>Create new</h3>\n          <NewBlogForm submitBlog={submitBlog} ref={newBlogForm} />\n        </Togglable>\n        <BlogList\n          user={user}\n          blogs={blogs}\n          logout={logout}\n          likeBlog={likeBlog}\n          removeBlog={removeBlog}\n        />\n      </div>\n    ) :\n    (\n      <div>\n        <h2>Login</h2>\n        <Notification contents={notification} isShowing={showingNotification} />\n        <LoginForm\n          handleLogin={handleLogin}\n          username={username}\n          setUsername={setUsername}\n          password={password}\n          setPassword={setPassword}\n        />\n      </div>\n    )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}