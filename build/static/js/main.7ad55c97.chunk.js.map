{"version":3,"sources":["components/LoginForm.js","components/Blog.js","components/BlogList.js","components/NewBlogForm.js","components/Notification.js","services/blogs.js","services/login.js","components/Togglable.js","App.js","index.js"],"names":["LoginForm","props","handleLogin","username","setUsername","password","setPassword","onSubmit","type","value","name","onChange","target","Blog","blog","user","likeBlog","removeBlog","useState","detailed","setDetailed","handleLike","event","a","preventDefault","handleRemove","window","confirm","title","author","showWhenDetailed","display","showToPosterWhenDetailed","style","paddingTop","paddingLeft","border","borderWidth","marginBottom","onClick","url","likes","ActiveUserStatus","logout","BlogList","blogs","map","id","NewBlogForm","React","forwardRef","ref","submitBlog","setTitle","setAuthor","setUrl","useImperativeHandle","Notification","contents","isShowing","text","success","baseUrl","token","getAll","axios","get","then","response","data","setToken","newToken","submit","config","headers","Authorization","post","like","newBlog","put","deleteBlog","delete","login","credentials","Togglable","visible","setVisible","hideWhenVisible","showWhenVisible","toggleVisibility","buttonLabel","children","App","setBlogsFinal","setUser","notification","setNotification","showingNotification","setShowingNotification","setBlogs","blogArray","sort","b1","b2","newBlogFormTogglable","useRef","newBlogForm","useEffect","currentUserJSON","localStorage","getItem","JSON","parse","blogService","console","log","showNotification","setTimeout","loginService","setItem","stringify","concat","likedBlogUser","likedBlog","newBlogs","b","deletedBlog","filter","current","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7ad55c97.chunk.js","sourcesContent":["import React from 'react'\n\nconst LoginForm = props => {\n  const {\n    handleLogin,\n    username,\n    setUsername,\n    password,\n    setPassword,\n  } = props\n\n  return (\n    <form onSubmit={handleLogin}>\n      <div>\n        username\n          <input\n            type=\"text\"\n            value={username}\n            name=\"Username\"\n            onChange={({ target }) => setUsername(target.value)}\n          />\n      </div>\n      <div>\n        password\n          <input\n            type=\"text\"\n            value={password}\n            name=\"Password\"\n            onChange={({ target }) => setPassword(target.value)}\n          />\n      </div>\n      <button type=\"submit\">login</button>\n    </form>\n  )\n}\n\nexport default LoginForm","import React, { useState } from 'react'\n\nconst Blog = ({ blog, user, likeBlog, removeBlog }) => {\n  const [detailed, setDetailed] = useState(false)\n\n  const toggleDetail = event => {\n    event.preventDefault()\n    setDetailed(!detailed)\n  }\n\n  const handleLike = async event => {\n    event.preventDefault()\n    await likeBlog(blog)\n  }\n\n  const handleRemove = async event => {\n    event.preventDefault()\n    if (window.confirm(`Remove blog ${blog.title} by ${blog.author}`)) {\n      await removeBlog(blog)\n    }\n  }\n\n  const isPoster = () => user.username === blog.user.username\n\n  const showWhenDetailed = { display: detailed ? '' : 'none' }\n  const showToPosterWhenDetailed = { display: detailed && isPoster() ? '' : 'none' }\n\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5\n  }\n\n  return (\n    <div style={blogStyle}>\n      <div>\n        {blog.title} {blog.author}\n        <button onClick={toggleDetail}>{detailed ? 'hide' : 'view'}</button>\n      </div>\n\n      <div style={showWhenDetailed}>\n        {blog.url}\n      </div>\n\n      <div style={showWhenDetailed}>\n        likes {blog.likes}\n        <button onClick={handleLike}>like</button>\n      </div>\n\n      <div style={showWhenDetailed}>\n        {blog.user.name}\n      </div>\n\n      <div style={showToPosterWhenDetailed}>\n        <button onClick={handleRemove}>remove</button>\n      </div>\n    </div>\n  )\n}\n\nexport default Blog","import React from 'react'\nimport Blog from './Blog'\n\nconst ActiveUserStatus = ({ user, logout }) => (\n  <div>\n    <p>{user.name} logged in<button onClick={logout}>logout</button></p>\n  </div>\n)\n\nconst BlogList = props => {\n  const { user, blogs, logout, likeBlog, removeBlog } = props\n\n  return (\n    <div>\n      <ActiveUserStatus\n        user={user}\n        logout={logout}\n      />\n\n      {blogs.map(blog =>\n        <Blog\n          key={blog.id}\n          blog={blog}\n          user={user}\n          likeBlog={likeBlog}\n          removeBlog={removeBlog}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default BlogList","import React, { useState, useImperativeHandle } from 'react'\n\nconst NewBlogForm = React.forwardRef((props, ref) => {\n  const {\n    submitBlog,\n  } = props\n\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n\n  const handleBlogSubmission = event => {\n    event.preventDefault()\n    submitBlog({\n      title,\n      author,\n      url,\n      likes: 0,\n    })\n  }\n\n  useImperativeHandle(ref, () => {\n    return { title, setTitle, author, setAuthor, url, setUrl }\n  })\n\n  return (\n    <form onSubmit={handleBlogSubmission}>\n      <div>\n        title:\n        <input\n          type=\"text\"\n          value={title}\n          name=\"title\"\n          onChange={({ target }) => setTitle(target.value)}\n        />\n      </div>\n      <div>\n        author:\n        <input\n          type=\"text\"\n          value={author}\n          name=\"author\"\n          onChange={({ target }) => setAuthor(target.value)}\n        />\n      </div>\n      <div>\n        url:\n        <input\n          type=\"text\"\n          value={url}\n          name=\"url\"\n          onChange={({ target }) => setUrl(target.value)}\n        />\n      </div>\n      <button type=\"submit\">create</button>\n    </form>\n  )\n})\n\nexport default NewBlogForm","import React from 'react'\n\nconst Notification = ({ contents, isShowing }) => {\n  const { success, text } = contents\n\n  if (isShowing) {\n    return (\n      <div>{text}</div>\n    )\n  } else {\n    return (<div></div>)\n  }\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst setToken = newToken => token = `bearer ${newToken}`\n\nconst submit = async blog => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, blog, config)\n  return response.data\n}\n\nconst like = async blog => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const newBlog = {\n    ...blog,\n    likes: blog.likes + 1,\n  }\n\n  const response = await axios.put(`${baseUrl}/${blog.id}`, newBlog, config)\n  return response.data\n}\n\nconst deleteBlog = async blog => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.delete(`${baseUrl}/${blog.id}`, config)\n  return response.data\n}\n\nexport default { getAll, setToken, submit, like, deleteBlog }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import React, { useState, useImperativeHandle } from 'react'\n\nconst Togglable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return { toggleVisibility }\n  })\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  )\n})\n\nexport default Togglable","import React, { useState, useEffect, useRef } from 'react'\n\nimport LoginForm from './components/LoginForm'\nimport BlogList from './components/BlogList'\nimport NewBlogForm from './components/NewBlogForm'\nimport Notification from './components/Notification'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport Togglable from './components/Togglable'\n\nconst App = () => {\n  const [blogs, setBlogsFinal] = useState([]) /* do not directly use setBlogsFinal */\n  // authentication\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  // blog submission\n  const [notification, setNotification] = useState({})\n  const [showingNotification, setShowingNotification] = useState(false)\n\n  const setBlogs = blogArray => {\n    setBlogsFinal(blogArray.sort((b1, b2) => b2.likes - b1.likes))\n  }\n\n  const newBlogFormTogglable = useRef()\n  const newBlogForm = useRef()\n\n  useEffect(() => {\n    const currentUserJSON = window.localStorage.getItem('currentBloglistUser')\n\n    if (currentUserJSON) {\n      const user = JSON.parse(currentUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n      console.log('user found:', user.username)\n    } else {\n      console.log('user not found')\n    }\n\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n  const showNotification = contents => {\n    setNotification(contents)\n    setShowingNotification(true)\n    setTimeout(() => {\n      setShowingNotification(false)\n      setNotification({})\n    }, 2500)\n  }\n\n  const handleLogin = async event => {\n    event.preventDefault()\n\n    try {\n      const user = await loginService.login({ username, password })\n\n      window.localStorage.setItem('currentBloglistUser', JSON.stringify(user))\n\n      setUser(user)\n      blogService.setToken(user.token)\n      setUsername('')\n      setPassword('')\n      showNotification({ success: true, text: `logged in as ${user.username}` })\n    } catch (exception) {\n      console.log('login failed')\n      showNotification({ success: false, text: 'wrong username or password' })\n    }\n  }\n\n  const logout = event => {\n    event.preventDefault()\n\n    setUser(null)\n    newBlogForm.current.setTitle('')\n    newBlogForm.current.setAuthor('')\n    newBlogForm.current.setUrl('')\n\n    window.localStorage.removeItem('currentBloglistUser')\n    showNotification({ success: true, text: 'logged out' })\n  }\n\n  const submitBlog = async newBlog => {\n    try {\n      const blog = await blogService.submit(newBlog)\n      console.log('blog submitted', blog)\n      setBlogs(blogs.concat({ ...blog, user: user })) /* Workaround to save user data */\n\n      if (blog) {\n        showNotification({ success: true, text: `${blog.title} added` })\n      } else {\n        showNotification({ success: false, text: 'blog creation failed' })\n      }\n    } catch {\n      console.log('blog submission failed')\n      showNotification({ success: false, text: 'blog creation failed' })\n    }\n  }\n\n  const likeBlog = async blog => {\n    try {\n      // Workaround to save user data\n      const likedBlogUser = blog.user\n\n      const likedBlog = await blogService.like(blog)\n      const newBlogs = blogs.map(b =>\n        b === blog\n          ? { ...likedBlog, user: likedBlogUser } /* Workaround to save user data */\n          : b\n      )\n      setBlogs(newBlogs)\n\n      if (likedBlog) {\n        showNotification({ success: true, text: `${blog.title} liked` })\n      } else {\n        showNotification({ success: false, text: 'blog cannot be liked' })\n      }\n    } catch {\n      console.log('blog cannot be liked')\n      showNotification({ success: false, text: 'blog cannot be liked' })\n    }\n  }\n\n  const removeBlog = async blog => {\n    try {\n      const deletedBlog = await blogService.deleteBlog(blog)\n      const newBlogs = blogs.filter(b => b !== blog)\n      setBlogs(newBlogs)\n\n      if (deletedBlog) {\n        showNotification({ success: true, text: `${blog.title} liked` })\n      } else {\n        showNotification({ success: false, text: 'blog cannot be liked' })\n      }\n    } catch {\n      console.log('blog cannot be liked')\n      showNotification({ success: false, text: 'blog cannot be liked' })\n    }\n  }\n\n\n  return user ?\n    (\n      <div>\n        <h2>Blogs</h2>\n        <Notification contents={notification} isShowing={showingNotification} />\n        <Togglable buttonLabel=\"create new blog\" ref={newBlogFormTogglable}>\n          <h3>Create new</h3>\n          <NewBlogForm submitBlog={submitBlog} ref={newBlogForm} />\n        </Togglable>\n        <BlogList\n          user={user}\n          blogs={blogs}\n          logout={logout}\n          likeBlog={likeBlog}\n          removeBlog={removeBlog}\n        />\n      </div>\n    ) :\n    (\n      <div>\n        <h2>Login</h2>\n        <Notification contents={notification} isShowing={showingNotification} />\n        <LoginForm\n          handleLogin={handleLogin}\n          username={username}\n          setUsername={setUsername}\n          password={password}\n          setPassword={setPassword}\n        />\n      </div>\n    )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}